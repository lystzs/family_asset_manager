# FAM Project Rules (.workspacerules)

## 1. Architecture & Safety
- **API First:** Backend(FastAPI)와 Frontend(Streamlit)를 철저히 분리합니다. Frontend는 절대 KIS API를 직접 호출하지 않고, Backend API를 경유해야 합니다.
- **Trading Mode:** Backend 시작 시 `os.getenv("TRADING_MODE")`를 확인하여 KIS 도메인(Real/Virtual)을 결정합니다.
- **Strict Typing:** 모든 API 입출력(Request/Response)은 `Pydantic` 모델로 정의합니다.

## 2. Coding Standards
- **Backend:** `FastAPI`의 `Router` 패턴을 사용하여 모듈화합니다.
- **Frontend:** `Streamlit`의 `session_state`를 활용하여 API 호출 횟수를 최적화합니다.
- **Testing:** `tests/` 폴더에서 `pytest-mock`을 사용해 외부 API 호출을 차단하고 로직을 검증합니다.

## 3. Task & Language
- **Language:** 주석, 로그, 문서는 **한국어**, 코드는 **영어**로 작성합니다.
- **Workflow:** 작업 전후 반드시 `plan.md`를 확인하고 진행률을 업데이트합니다.
